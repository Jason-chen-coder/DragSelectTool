(function(t){function e(e){for(var n,s,a=e[0],l=e[1],c=e[2],h=0,d=[];h<a.length;h++)s=a[h],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,a=1;a<i.length;a++){var l=i[a];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},o={app:0},r=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/DragSelectTool/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0e80":function(t,e,i){t.exports=i.p+"img/prank.b67c6a4a.jpg"},2395:function(t,e,i){},"241d":function(t,e,i){"use strict";i("2b3b")},"2b3b":function(t,e,i){},"31a3":function(t,e){(function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16.7-(i-t)),o=window.setTimeout((function(){e(i+n)}),n);return t=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})})()},5125:function(t,e,i){t.exports=i.p+"img/0.23117616.jpg"},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("img",{attrs:{alt:"Vue logo",src:i("cf05")}}),n("h1",[t._v("实现多选,单选,框选")]),n("div",{staticClass:"tool-box"},[n("div",{staticClass:"btn",on:{click:function(e){t.mood=!t.mood}}},[t._v(" "+t._s(t.mood?"点击变宽":"点击收缩")+" ")]),n("div",{staticClass:"btn",on:{click:t.insertItem}},[t._v("添加一个柴犬")]),t._m(0),n("div",{staticStyle:{"margin-top":"20px"}},[n("code",[t._v("已选中")]),t._v(":"+t._s(t.selectedList.length)+"个柴犬啦 ")])]),n("div",{class:["index-page",t.mood?"":"bigger"]},[n("div",{staticClass:"result-box"},[n("vue-drag-select",{ref:"dragSelect",attrs:{"value-key":"name","item-margin":[0,10,10,0]},model:{value:t.selectedList,callback:function(e){t.selectedList=e},expression:"selectedList"}},[t._l(t.dataList,(function(t,e){return[n("drag-select-option",{key:t.id,attrs:{value:t,"item-index":e}},[n("div",{staticClass:"item-self"},[100===e?n("img",{attrs:{src:i("0e80")}}):t.lip?n("img",{attrs:{src:i("98a8")}}):n("img",{attrs:{src:i("5125")}})])])]}))],2)],1)])])},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tips"},[t._v(" 可以尝试 "),i("code",[t._v("Ctrl")]),t._v("、 "),i("code",[t._v("command")]),t._v(" 和 "),i("code",[t._v("shift")]),t._v(" 按键 ")])}],s=(i("13d5"),i("a434"),i("b0c0"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"vueDragSelect",staticClass:"vue-drag-select"},[i("div",{staticClass:"select-wrapper",style:t.wrapperStyle,on:{mousedown:t.onMouseDown}},[t._t("default"),i("div",{directives:[{name:"show",rawName:"v-show",value:t.mouseDown,expression:"mouseDown"}],staticClass:"vue-drag-select-box",style:t.selectionBoxStyling})],2)])}),a=[],l=(i("c740"),i("4160"),i("caad"),i("c975"),i("a15b"),i("d81d"),i("a9e3"),i("d3b7"),i("25f0"),i("159b"),i("31a3"),i("ac1f"),i("1276"),function(t,e){e=e||"";for(var i=e.split("."),n=t,o=null,r=0,s=i.length;r<s;r++){var a=i[r];if(!n)break;if(r===s-1){o=n[a];break}n=n[a]}return o}),c={name:"vueDragSelect",props:{value:{type:Array,default:function(){return[]}},valueKey:{type:String,default:"value"},itemWidth:{type:Number,default:100},itemHeight:{type:Number,default:105},itemMargin:{type:Array,default:function(){return[20,20,20,20]},validator:function(t){return[1,2,3,4].includes(t.length)}},warpperPadding:{type:Array,default:function(){return[20,20,20,20]},validator:function(t){return[1,2,3,4].includes(t.length)}},slowSpeed:{type:Number,default:0},fastSpeed:{type:Number,default:20}},provide:function(){return{vueDragSelect:this}},data:function(){return{clientRect:null,options:[],minHeight:100,mouseDown:!1,startPoint:null,endPoint:null,lastEndPoint:null,scrollIng:!1,autoScrollTimer:null,scrollDirection:!0,selectionBox:{left:0,top:0,width:0,height:0},selectionBoxStyling:{left:"0px",top:"0px",width:"0px",height:"0px",borderWidth:"0px"},controlKeyDown:!1,shiftKeyDown:!1,scrollSpeedSlow:Math.min(this.slowSpeed,this.fastSpeed),scrollSpeedFast:Math.max(this.slowSpeed,this.fastSpeed),scrollSpeed:Math.min(this.slowSpeed,this.fastSpeed),triggerDistance:10}},mounted:function(){this.clientRect=this.$el.getBoundingClientRect(),this.elementLayout(),this.detectKey()},computed:{currentValue:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},wrapperStyle:function(){var t=this.warpperPadding.map((function(t){return t+"px"})).join(" ");return{minHeight:"".concat(this.minHeight,"px"),padding:t}}},methods:{boxAutoScroll:function(){this.scrollIng=!0,this.autoScrollTimer=window.requestAnimationFrame(this.scrollFn)},scrollFn:function(){if(this.mouseDown){if(this.scrollDirection){if(this.$el.scrollTop+this.$el.offsetHeight>=this.minHeight)return void(this.scrollIng=!1);this.$el.scrollTop+=this.scrollSpeed}else{if(this.$el.scrollTop<=0)return void(this.scrollIng=!1);this.$el.scrollTop-=this.scrollSpeed}cancelAnimationFrame(this.autoScrollTimer),this.computeLastEndPoint(),this.autoScrollTimer=window.requestAnimationFrame(this.scrollFn)}else this.scrollIng=!1},computeLastEndPoint:function(){if(this.mouseDown&&this.startPoint&&this.endPoint){var t=this.clientRect;this.lastEndPoint={x:this.endPoint.x-t.left,y:this.endPoint.y-t.top+this.$el.scrollTop};var e=Math.min(this.startPoint.x,this.lastEndPoint.x),i=Math.min(this.startPoint.y,this.lastEndPoint.y),n=Math.abs(this.startPoint.x-this.lastEndPoint.x),o=Math.abs(this.startPoint.y-this.lastEndPoint.y);this.selectionBox={left:e,top:i,width:n,height:o},this.selectionBoxStyling={left:"".concat(e,"px"),top:"".concat(i,"px"),width:"".concat(n,"px"),height:"".concat(o,"px")}}},onMouseDown:function(t){if("select-wrapper"===t.target.className&&2!==t.button){var e=this.clientRect;this.mouseDown=!0,this.startPoint={x:t.pageX-e.left,y:t.pageY-e.top+this.$el.scrollTop},window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp)}},onMouseMove:function(t){if(this.mouseDown){var e=this.clientRect,i=e.top+e.height,n=this.triggerDistance,o=e.top+n,r=i-n;if(t.pageY>r&&(this.scrollDirection=!0),t.pageY<o&&(this.scrollDirection=!1),t.pageY>o&&t.pageY<r)cancelAnimationFrame(this.autoScrollTimer),this.scrollIng=!1;else{var s=this.scrollDirection&&this.$el.scrollTop+e.height<this.minHeight||!this.scrollDirection&&this.$el.scrollTop>0;!this.scrollIng&&s&&this.boxAutoScroll()}var a=this.scrollSpeed,l=this.scrollSpeedFast-this.scrollSpeedSlow;if(t.pageY<=o)if(t.pageY>e.top){var c=1-(t.pageY-e.top)/n;a=this.scrollSpeedSlow+c*l}else a=this.scrollSpeedFast;if(t.pageY>=r)if(t.pageY<i){var u=1-(i-t.pageY)/n;a=this.scrollSpeedSlow+u*l}else a=this.scrollSpeedFast;this.scrollSpeed>this.scrollSpeedFast&&(this.scrollSpeed=this.scrollSpeedFast),this.scrollSpeed=a,this.endPoint={x:t.pageX,y:t.pageY},this.scrollIng||this.computeLastEndPoint()}},onMouseUp:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),this.mouseDown=!1,this.computeSelectedItems(),this.startPoint=null,this.endPoint=null,this.lastEndPoint=null,this.scrollSpeed=0,this.selectionBoxStyling={left:"0px",top:"0px",width:"0px",height:"0px",borderWidth:"0px"}},computeSelectedItems:function(){var t=this,e=this;this.controlKeyDown||(this.currentValue=[]),this.$nextTick((function(){t.options.forEach((function(t){var i=t.getItemStyle(),n=e.selectionBox.left<=i.left+i.width&&e.selectionBox.left+e.selectionBox.width>=i.left&&e.selectionBox.top<=i.top+i.height&&e.selectionBox.top+e.selectionBox.height>=i.top;if(n){var o=e.currentValue.indexOf(t.value);o>-1?e.currentValue.splice(o,1):e.currentValue.push(t.value)}})),e.selectionBox={left:0,top:0,width:0,height:0}}))},clickSelect:function(t){var e=this,i=t.value,n=t.itemIndex;if(e.shiftKeyDown){var o=[],r=e.options,s=e.currentValue.length;return r.forEach((function(t){t.itemSelected&&o.push(t.itemIndex)})),e.currentValue=[],void e.$nextTick((function(){if(0===s)r.forEach((function(t,i){i<=n&&e.currentValue.push(t.value)}));else if(1===s)o[0]>n?r.forEach((function(t,i){i>=n&&i<=o[0]&&e.currentValue.push(t.value)})):r.forEach((function(t,i){i<=n&&i>=o[0]&&e.currentValue.push(t.value)}));else if(s>=2){var t=Math.max.apply(null,o),i=Math.min.apply(null,o);if(n>=t)r.forEach((function(i,o){o<=n&&o>=t&&e.currentValue.push(i.value)}));else if(n>=i&&n<t){var a=[];o.forEach((function(t){t>=i&&t<=n&&a.push(t)}));var l=Math.max.apply(null,a);r.forEach((function(t,i){i>=l&&i<=n&&e.currentValue.push(t.value)}))}else r.forEach((function(t,o){o>=n&&o<=i&&e.currentValue.push(t.value)}))}}))}if(e.controlKeyDown)if(t.itemSelected){var a=e.getIndex(e.currentValue,i);e.currentValue.splice(a,1)}else e.currentValue.push(i);else e.currentValue=[],e.$nextTick((function(){e.currentValue.push(i)}))},detectKey:function(){var t=navigator.userAgent.indexOf("Window")>0,e=navigator.userAgent.indexOf("Mac OS X")>0,i=this;window.onkeydown=function(n){var o=n||window.event;o&&16===o.keyCode&&(i.shiftKeyDown=!0),o&&17===o.keyCode&&t&&(i.controlKeyDown=!0),o&&91===o.keyCode&&e&&(i.controlKeyDown=!0)},window.onkeyup=function(n){var o=n||window.event;o&&16===o.keyCode&&(i.shiftKeyDown=!1),o&&17===o.keyCode&&t&&(i.controlKeyDown=!1),o&&91===o.keyCode&&e&&(i.controlKeyDown=!1)}},getIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,i="[object object]"===Object.prototype.toString.call(e).toLowerCase(),n=this.valueKey;return t.findIndex((function(t){return i?l(t,n)===l(e,n):t===e}))},elementLayout:function(){var t,e,i,n,o,r=this.itemMargin.length;1===r?(t=2*this.itemMargin[0],e=2*this.itemMargin[0]):2===r?(t=2*this.itemMargin[1],e=2*this.itemMargin[0]):3===r?(t=2*this.itemMargin[1],e=this.itemMargin[0]+this.itemMargin[2]):4===r&&(t=this.itemMargin[1]+this.itemMargin[3],e=this.itemMargin[0]+this.itemMargin[2]);var s=this.warpperPadding.length;1===s?(i=this.warpperPadding[0],n=this.warpperPadding[0],o=2*this.warpperPadding[0]):2===s?(i=this.warpperPadding[1],n=this.warpperPadding[0],o=2*this.warpperPadding[0]):3===s?(i=this.warpperPadding[1],n=this.warpperPadding[0],o=this.warpperPadding[0]+this.warpperPadding[2]):4===s&&(i=this.warpperPadding[3],n=this.warpperPadding[0],o=this.warpperPadding[0]+this.warpperPadding[2]),t=parseInt(t),e=parseInt(e);var a=this.itemWidth+t,l=this.itemHeight+e,c=this.$refs.vueDragSelect.offsetWidth,u=parseInt(c/a),h=0;this.options.forEach((function(t,e){!e||e%u||(h+=1),t.$refs.vueDragSelectOption.style.top="".concat(h*l+n,"px"),t.$refs.vueDragSelectOption.style.left="".concat(e%u*a+i,"px")})),this.minHeight=(h+1)*l+o},onOptionDestroy:function(t){t>-1&&this.options.splice(t,1)}},beforeDestroy:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp)},updated:function(){var t=this;this.$nextTick((function(){t.clientRect=t.$el.getBoundingClientRect()})),this.$nextTick((function(){t.options.sort((function(t,e){return t.itemIndex-e.itemIndex})),t.elementLayout()}))}},u=c,h=(i("241d"),i("2877")),d=Object(h["a"])(u,s,a,!1,null,null,null),p=d.exports,f=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"vueDragSelectOption",staticClass:"vue-drag-select-option",class:[t.itemSelected?"selected-item":""],style:t.itemStyle,on:{click:t.clickItem}},[t._t("default")],2)},m=[],g=(i("45fc"),{name:"DragSelectOption",props:{value:{required:!0},itemIndex:{required:!0}},inject:["vueDragSelect"],data:function(){return{}},created:function(){this.vueDragSelect.options.push(this)},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},itemSelected:function(){return this.contains(this.vueDragSelect.value,this.value)},itemStyle:function(){var t=this.vueDragSelect.itemMargin.map((function(t){return t+"px"})).join(" ");return{width:"".concat(this.vueDragSelect.itemWidth,"px"),height:"".concat(this.vueDragSelect.itemHeight,"px"),margin:t}}},methods:{getItemStyle:function(){var t=this.$refs.vueDragSelectOption,e=t.offsetTop,i=t.offsetLeft,n=t.clientWidth,o=t.clientHeight;return{top:e,left:i,width:n,height:o}},contains:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;if(this.isObject){var i=this.vueDragSelect.valueKey;return t&&t.some((function(t){return l(t,i)===l(e,i)}))}return t&&t.indexOf(e)>-1},clickItem:function(){this.vueDragSelect.clickSelect(this)}},beforeDestroy:function(){var t=this.vueDragSelect.options.indexOf(this);this.vueDragSelect.onOptionDestroy(t)}}),v=g,w=Object(h["a"])(v,f,m,!1,null,null,null),y=w.exports,S={name:"App",components:{vueDragSelect:p,dragSelectOption:y},data:function(){return{mood:!0,dataList:[{id:1},{id:2},{id:3}],selectedList:[],id:300}},created:function(){this.dataList=[];for(var t=50;t<=300;t++)this.dataList.push({id:t,name:t})},watch:{mood:function(){var t=this;clearTimeout(this.timeClick),this.timeClick=setTimeout((function(){t.$refs.dragSelect.elementLayout(200,230)}),500)},selectedList:{deeply:!0,handler:function(t){console.log("newvalue",t)}}},methods:{insertItem:function(){var t=this.dataList.reduce((function(t,e){return t.id<e.id?e:t})),e=t.id,i=t.name;this.dataList.splice(0,0,{id:e+1,name:i+1,lip:!0})}}},x=S,b=(i("7c55"),Object(h["a"])(x,o,r,!1,null,null,null)),D=b.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(D)}}).$mount("#app")},"7c55":function(t,e,i){"use strict";i("2395")},"98a8":function(t,e,i){t.exports=i.p+"img/1.0951de01.jpg"},cf05:function(t,e,i){t.exports=i.p+"img/logo.82b9c7a5.png"}});
//# sourceMappingURL=app.42146e96.js.map